import{k as c,ay as X,a6 as k,q as r,o as g,b as Z,w as n,p as a,m as l,z as f,bj as y,ba as b,c as w,a as D,F as T,$ as tt,a0 as et,x as u,be as at,b7 as lt,j as st,a1 as nt,V as L}from"./index.81a573ca.js";import{a as ot,q as ct}from"./requestURL.2ee67e65.js";import{u as rt,d as it}from"./orderStore.56fa4916.js";import{V as x}from"./VBtn.b672f002.js";import{V as R}from"./VSpacer.088c66aa.js";import{V as ut}from"./VTextField.f6361a39.js";import{V as P}from"./VSelect.ba2bc871.js";import{V as N}from"./VDivider.250021f4.js";import{V as dt}from"./VTable.2219d083.js";import{V as pt}from"./VPagination.024194f4.js";import{V as O}from"./VMenu.366f1be2.js";import{V as $,a as j,b as M}from"./VList.e682e2be.js";import"./axios.364130a5.js";import"./index.d28f26f2.js";import"./forwardRefs.54bb1675.js";import"./scopeId.2f150327.js";import"./VChip.9fb5519d.js";const ft={class:"d-flex gap-4",style:{"margin-right":"auto"}},mt={href:"https://vendor.ecpay.com.tw/User/LogOn_Step1#",target:"_blank"},_t={href:"https://admin.onewarehouse.net/order/list",target:"_blank"},vt=l("div",{class:"me-3"},null,-1),ht={class:"d-flex align-center flex-wrap gap-4"},xt={class:"order-list-filter"},Vt={class:"order-attr-filter"},gt={class:"order-list-filter"},bt=l("thead",{class:"text-uppercase"},[l("tr",null,[l("th",{scope:"col",class:"text-center"}," #ID "),l("th",{scope:"col",class:"text-center"}," \u5546\u54C1\u904B\u9001\u985E\u578B "),l("th",{scope:"col",class:"text-center"}," \u7E3D\u91D1\u984D "),l("th",{scope:"col",class:"text-center"}," \u6210\u7ACB\u65E5\u671F "),l("th",{scope:"col",class:"text-center"}," \u8A02\u55AE\u72C0\u614B "),l("th",{scope:"col",class:"text-center"}," \u64CD\u4F5C ")])],-1),yt={class:"text-center"},wt={class:"text-center"},Et={class:"text-center"},At={class:"text-center"},It={class:"text-center"},Ct={style:{width:"4rem"}},St=l("tr",null,[l("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),kt=[St],Dt={class:"text-sm text-disabled"},Qt={__name:"index",setup(Tt){const U=rt(),m=c(""),E=c(10),_=c(1),W=c(1),Y=c(0),d=c([]),A=c([]),v=c(),h=c(),z=[{title:"\u5F85\u51FA\u8CA8",value:"WAIT_DELIVER"},{title:"\u5DF2\u51FA\u8CA8",value:"WAIT_RECEIVE"},{title:"\u5F85\u4ED8\u6B3E",value:"WAIT_PAYMENT"},{title:"\u5DF2\u5B8C\u6210",value:"COMPLETED"}];c(!1),c();const B=st();X(async()=>{await I()});const V=k(()=>{let e=d.value;return m.value&&(e=e==null?void 0:e.filter(t=>{var o;return(o=t==null?void 0:t.id)==null?void 0:o.toLowerCase().includes(m.value.toLowerCase())})),v.value&&(e=e==null?void 0:e.filter(t=>S(t==null?void 0:t.orderStatus)===v.value)),h.value&&(e=e==null?void 0:e.filter(t=>C(t==null?void 0:t.attribute)===h.value)),e=e.map(t=>({...t,createdAt:q(t.createdAt),orderStatus:S(t.orderStatus),attribute:C(t.attribute)})),e});async function I(){U.fetchOrders({take:200}).then(e=>{d.value=e.data.data,console.log(d.value)}).catch(e=>{console.log(e)})}const F=k(()=>{const e=d.value.length?(_.value-1)*E.value+1:0,t=d.value.length+(_.value-1)*E.value;return`Showing ${e} to ${t} of ${Y.value} entries`});function C(e){return e==="GENERAL"?"\u4E00\u822C":"\u51B7\u93C8"}function S(e){switch(e){case"WAIT_PAYMENT":return"\u5F85\u4ED8\u6B3E";case"WAIT_DELIVER":return"\u5F85\u51FA\u8CA8";case"WAIT_RECEIVE":return"\u5DF2\u51FA\u8CA8";case"COMPLETED":return"\u5DF2\u5B8C\u6210";case"CANCELLED":return"\u5DF2\u53D6\u6D88";case"REVOKED":return"\u5DF2\u9000\u8CA8";default:return e}}function q(e){return it(e).format("YYYY/MM/DD A hh:mm")}function G(){if(V.value.length==0)return;const e=V.value.map(t=>({id:t.id,attribute:t.attribute,createdAt:t.createdAt,orderStatus:t.orderStatus,price:t.price,...t==null?void 0:t.consignee}));console.log(e),K(e)}function K(e){const t=Object.keys(e[0]).join(",")+`
`,o=e.map(J=>Object.values(J).join(",")).join(`
`),s="data:text/csv;charset=utf-8,"+t+o,i=encodeURI(s),p=document.createElement("a");p.setAttribute("href",i),p.setAttribute("download","data.csv"),document.body.appendChild(p),p.click(),document.body.removeChild(p)}async function Q(e,t){console.log("CALL API, ",e,t);try{await ot.post(`/${ct(e.id)}`,{orderStatus:t})}catch(o){console.log(o)}await I()}function H(e){B.push({path:"/apps/order/preview",query:{id:e==null?void 0:e.id}})}return(e,t)=>r(V)?(g(),Z(at,{key:0,id:"user-list"},{default:n(()=>[a(y,{class:"d-flex flex-end flex-wrap gap-4 justify-end"},{default:n(()=>[l("div",ft,[l("a",mt,[a(x,{color:"success","prepend-icon":"tabler-external-link"},{default:n(()=>[f(" \u7DA0\u754C\u8A02\u55AE\u7BA1\u7406 ")]),_:1})]),l("a",_t,[a(x,{color:"success","prepend-icon":"tabler-external-link"},{default:n(()=>[f(" \u7269\u6D41\u7BA1\u7406 ")]),_:1})])]),a(x,{"prepend-icon":"tabler-file-export",onClick:G},{default:n(()=>[f(" \u8F38\u51FA\u5831\u8868 ")]),_:1})]),_:1}),a(y,{class:"d-flex align-center flex-wrap gap-4"},{default:n(()=>[vt,a(R),l("div",ht,[l("div",xt,[a(ut,{modelValue:r(m),"onUpdate:modelValue":t[0]||(t[0]=o=>b(m)?m.value=o:null),style:{width:"160px"},placeholder:"\u641C\u5C0B\u8A02\u55AE #ID",density:"compact"},null,8,["modelValue"])]),l("div",Vt,[a(P,{modelValue:r(h),"onUpdate:modelValue":t[1]||(t[1]=o=>b(h)?h.value=o:null),style:{width:"160px"},label:"\u904B\u9001\u985E\u578B",clearable:"","clear-icon":"tabler-x","single-line":"",items:["\u4E00\u822C","\u51B7\u93C8"]},null,8,["modelValue"])]),l("div",gt,[a(P,{modelValue:r(v),"onUpdate:modelValue":t[2]||(t[2]=o=>b(v)?v.value=o:null),style:{width:"160px"},label:"\u8A02\u55AE\u72C0\u614B",clearable:"","clear-icon":"tabler-x","single-line":"",items:["\u5F85\u4ED8\u6B3E","\u5F85\u51FA\u8CA8","\u5F85\u53D6\u8CA8","\u5DF2\u5B8C\u6210","\u5DF2\u53D6\u6D88","\u5DF2\u9000\u8CA8"]},null,8,["modelValue"])])])]),_:1}),a(N),a(dt,{class:"text-no-wrap order-list-table"},{default:n(()=>{var o;return[bt,l("tbody",null,[(g(!0),w(T,null,D(r(V),s=>(g(),w("tr",{key:s.id,style:{height:"3.75rem"}},[l("td",yt,u(s==null?void 0:s.id),1),l("td",wt,u(s==null?void 0:s.attribute),1),l("td",Et," $"+u(s==null?void 0:s.price),1),l("td",At,u(s==null?void 0:s.createdAt),1),l("td",It,[a(O,null,{activator:n(({props:i})=>[a(x,nt({color:"primary"},i),{default:n(()=>[f(u(s==null?void 0:s.orderStatus),1)]),_:2},1040)]),default:n(()=>[a($,null,{default:n(()=>[(g(),w(T,null,D(z,i=>a(j,{key:i.title,value:"edit",onClick:p=>Q(s,i.value)},{default:n(()=>[a(M,null,{default:n(()=>[f(u(i.title),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:2},1024)]),_:2},1024)]),l("td",Ct,[a(x,{icon:"",variant:"text",color:"primary",size:"x-small"},{default:n(()=>[a(L,{size:22,icon:"tabler-dots-vertical"}),a(O,{activator:"parent"},{default:n(()=>[a($,null,{default:n(()=>[a(j,{value:"preview",onClick:i=>H(s)},{prepend:n(()=>[a(L,{color:"info",size:"24",class:"me-3",icon:"tabler-eye"})]),default:n(()=>[a(M,null,{default:n(()=>[f("\u8A73\u7D30\u8CC7\u8A0A")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),tt(l("tfoot",null,kt,512),[[et,!((o=r(d))!=null&&o.length)]])]}),_:1}),a(N),a(y,{class:"d-flex align-center flex-wrap gap-4 py-3"},{default:n(()=>[l("span",Dt,u(r(F)),1),a(R),a(pt,{modelValue:r(_),"onUpdate:modelValue":t[3]||(t[3]=o=>b(_)?_.value=o:null),size:"small","total-visible":5,length:r(W),onNext:t[4]||(t[4]=o=>A.value=[]),onPrev:t[5]||(t[5]=o=>A.value=[])},null,8,["modelValue","length"])]),_:1})]),_:1})):lt("",!0)}};export{Qt as default};
