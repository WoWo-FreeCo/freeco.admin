import{k as i,aM as q,a6 as C,ay as A,q as c,o as v,b as j,w as o,p as t,m as e,z as x,ba as h,bk as D,c as P,a as H,F as Q,$ as G,a0 as J,x as r,be as K,b7 as W,j as X,E as Y,D as Z,V}from"./index.3e6756d9.js";import{_ as ee}from"./ConfirmDialog.39e94147.js";import{a as te,D as se}from"./requestURL.e8351c03.js";import{u as ae}from"./prodStore.435d1c3c.js";import{V as I}from"./VBtn.a3be8285.js";import{V as $}from"./VSpacer.999620d4.js";import{V as le}from"./VTextField.a98f3cc5.js";import{V as k}from"./scopeId.92fb2811.js";import{V as oe,a as ne}from"./VTable.fbb70427.js";import{V as ie}from"./VMenu.a331d1d3.js";import{V as ce,a as L,b as T}from"./VList.ce2db9d6.js";import"./VDialog.f7c7f582.js";import"./forwardRefs.54bb1675.js";import"./axios.364130a5.js";import"./index.9410a6e6.js";const re={class:"me-3"},de={class:"d-flex align-center flex-wrap gap-4"},ue={class:"invoice-list-filter"},me=e("thead",{class:"text-uppercase"},[e("tr",null,[e("th",{scope:"col"}," #ID "),e("th",{scope:"col",class:"text-center"}," \u5546\u54C1\u5716 "),e("th",{scope:"col",class:"text-center"}," \u904B\u9001\u985E\u578B "),e("th",{scope:"col",class:"text-center"}," \u5546\u54C1\u540D\u7A31 "),e("th",{scope:"col",class:"text-center"}," \u5B9A\u50F9 "),e("th",{scope:"col",class:"text-center"}," \u6703\u54E1\u50F9 "),e("th",{scope:"col",class:"text-center"}," VIP\u50F9 "),e("th",{scope:"col",class:"text-center"}," SVIP\u50F9 "),e("th",{scope:"col",class:"text-center"}," \u64CD\u4F5C ")])],-1),pe={class:"prod-id"},fe={class:"prod-img"},_e={class:"text-center prod-name"},ve={class:"text-center prod-name"},xe={class:"text-center"},he={class:"text-center"},Ve={class:"text-center"},ge={class:"text-center"},be={style:{width:"4rem"}},ye=e("tr",null,[e("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),we=[ye],Ce={class:"text-sm text-disabled"},Oe={__name:"index",setup(De){const N=ae(),m=i("");i();const g=i(10),d=i(1),f=i(1),S=i(0),u=i([]),b=i([]),p=i(!1),_=i(),z=X();q(async()=>{await w()});const y=C(()=>{var a;return m.value?(a=u.value)==null?void 0:a.filter(s=>s==null?void 0:s.name.toLowerCase().includes(m.value.toLowerCase())):u.value});A(()=>{d.value>f.value&&(d.value=f.value)});async function w(){N.fetchProducts({}).then(a=>{u.value=a.data.data}).catch(a=>{console.log(a)})}const E=C(()=>{const a=u.value.length?(d.value-1)*g.value+1:0,s=u.value.length+(d.value-1)*g.value;return`Showing ${a} to ${s} of ${S.value} entries`});function B(a){_.value=a,p.value=!0}function R(a){z.push({path:"/apps/product/edit",query:{id:a.id}})}async function U(a){if(a)try{console.log(_.value),await te.delete(`/${se(_.value.id)}`),w()}catch(s){console.log(s)}}function F(a){return a==="COLD_CHAIN"?"\u51B7\u93C8":"\u4E00\u822C"}return(a,s)=>{const M=ee;return c(y)?(v(),j(K,{key:0,id:"product-list"},{default:o(()=>[t(D,{class:"d-flex align-center flex-wrap gap-4"},{default:o(()=>[e("div",re,[t(I,{"prepend-icon":"tabler-plus",to:{name:"apps-product-add"}},{default:o(()=>[x(" \u65B0\u5EFA\u5546\u54C1 ")]),_:1})]),t($),e("div",de,[e("div",ue,[t(le,{modelValue:c(m),"onUpdate:modelValue":s[0]||(s[0]=n=>h(m)?m.value=n:null),style:{width:"140px"},placeholder:"\u641C\u5C0B\u5546\u54C1",density:"compact"},null,8,["modelValue"])])])]),_:1}),t(k),t(oe,{class:"text-no-wrap invoice-list-table"},{default:o(()=>{var n;return[me,e("tbody",null,[(v(!0),P(Q,null,H(c(y),l=>(v(),P("tr",{key:l.id,style:{height:"3.75rem"}},[e("td",pe,[e("span",null,"#"+r(l==null?void 0:l.id),1)]),e("td",fe,[t(Y,null,{default:o(()=>[t(Z,{src:l==null?void 0:l.coverImg},null,8,["src"])]),_:2},1024)]),e("td",_e,r(F(l==null?void 0:l.attribute)),1),e("td",ve,r(l.name),1),e("td",xe," $"+r(l.price),1),e("td",he," $"+r(l.memberPrice),1),e("td",Ve," $"+r(l.vipPrice),1),e("td",ge," $"+r(l.svipPrice),1),e("td",be,[t(I,{icon:"",variant:"text",color:"primary",size:"x-small"},{default:o(()=>[t(V,{size:22,icon:"tabler-dots-vertical"}),t(ie,{activator:"parent"},{default:o(()=>[t(ce,null,{default:o(()=>[t(L,{value:"edit",onClick:O=>R(l)},{prepend:o(()=>[t(V,{color:"success",size:"24",class:"me-3",icon:"tabler-pencil"})]),default:o(()=>[t(T,null,{default:o(()=>[x("\u7DE8\u8F2F")]),_:1})]),_:2},1032,["onClick"]),t(L,{value:"delete",onClick:O=>B(l)},{prepend:o(()=>[t(V,{color:"error",size:"24",class:"me-3",icon:"tabler-trash"})]),default:o(()=>[t(T,null,{default:o(()=>[x("\u522A\u9664")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),G(e("tfoot",null,we,512),[[J,!((n=c(u))!=null&&n.length)]])]}),_:1}),t(k),t(D,{class:"d-flex align-center flex-wrap gap-4 py-3"},{default:o(()=>[e("span",Ce,r(c(E)),1),t($),t(ne,{modelValue:c(d),"onUpdate:modelValue":s[1]||(s[1]=n=>h(d)?d.value=n:null),size:"small","total-visible":5,length:c(f),onNext:s[2]||(s[2]=n=>b.value=[]),onPrev:s[3]||(s[3]=n=>b.value=[])},null,8,["modelValue","length"])]),_:1}),t(M,{isDialogVisible:c(p),"onUpdate:isDialogVisible":s[4]||(s[4]=n=>h(p)?p.value=n:null),"confirmation-msg":"\u78BA\u5B9A\u8981\u522A\u9664\u9078\u64C7\u7684\u5546\u54C1\uFF1F",onConfirm:U},null,8,["isDialogVisible"])]),_:1})):W("",!0)}}};export{Oe as default};
