import{y as O,k as g,aM as j,o as t,b as c,w as r,p as o,q as n,D as z,b7 as D,c as C,F as R,a as N,m as f,V as u,$ as V,a0 as v,z as q,bx as A,by as G,j as H}from"./index.765b4f7c.js";import{_ as J}from"./ConfirmDialog.ac9655dc.js";import{_ as K}from"./RichTextEditor.b34f7bc8.js";import{a as Q,U as W}from"./requestURL.e234a58b.js";import{u as X}from"./userStore.74503140.js";import{V as s}from"./VCol.2c960eb9.js";import{V as d}from"./VTextField.d4c5c89c.js";import{V as w}from"./VSelect.6920cd46.js";import{V as L}from"./VFileInput.6fd3ea41.js";import{V as m}from"./VBtn.bed821b9.js";import{V as Y}from"./VRow.aa276d47.js";import{V as Z}from"./VForm.20a9f5a1.js";import"./VDialog.6034821f.js";import"./scopeId.fa70d95f.js";import"./forwardRefs.54bb1675.js";import"./axios.364130a5.js";import"./index.5e39d728.js";import"./VList.cee23a0a.js";import"./VMenu.a10eb0bc.js";import"./VChip.a7580a62.js";const x={key:0,class:"images-flex"},_={class:"plus-image d-flex"},h={class:"d-flex",cols:"0"},ee={__name:"index",setup(le){const F=g(),M=X(),i=g({}),y=g(),$=g(),S=G(),U=H();j(async()=>{await I()});async function I(){try{const l=await M.fetchUsers();y.value=l.data.data,B()}catch(l){console.log(l)}}async function T(){try{const l={...i.value};await Q.put(`/${W(curProd.value.id)}`,l),alert("\u5DF2\u66F4\u65B0\u7528\u6236\u8CC7\u8A0A")}catch(l){console.log(l)}}function B(){var k,b;const l=(k=S.query)==null?void 0:k.id;if(!l)return U.push({path:"/apps/user/list"});const a=(b=y.value)==null?void 0:b.find(e=>e.id==l);if(!a)return U.push({path:"/apps/user/list"});$.value=a,i.value={...i.value,...a}}function E(){I()}return(l,a)=>{const k=K,b=J;return t(),c(Z,{ref_key:"form",ref:F,"lazy-validation":"",onSubmit:a[15]||(a[15]=A(()=>{},["prevent"]))},{default:r(()=>[o(Y,null,{default:r(()=>[o(s,{cols:"12"},{default:r(()=>[o(d,{modelValue:n(i).name,"onUpdate:modelValue":a[0]||(a[0]=e=>n(i).name=e),label:"\u5546\u54C1\u540D\u7A31",required:""},null,8,["modelValue"])]),_:1}),o(s,{cols:"12"},{default:r(()=>[o(d,{modelValue:n(i).skuId,"onUpdate:modelValue":a[1]||(a[1]=e=>n(i).skuId=e),label:"\u5546\u54C1\u6A19\u865F",required:""},null,8,["modelValue"])]),_:1}),o(s,{cols:"12"},{default:r(()=>[o(d,{modelValue:n(i).price,"onUpdate:modelValue":a[2]||(a[2]=e=>n(i).price=e),label:"\u5B9A\u50F9",required:"",min:"0",type:"number"},null,8,["modelValue"])]),_:1}),o(s,{cols:"12"},{default:r(()=>[o(d,{modelValue:n(i).memberPrice,"onUpdate:modelValue":a[3]||(a[3]=e=>n(i).memberPrice=e),label:"\u6703\u54E1\u50F9",required:"",type:"number",min:"0"},null,8,["modelValue"])]),_:1}),o(s,{cols:"12"},{default:r(()=>[o(d,{modelValue:n(i).vipPrice,"onUpdate:modelValue":a[4]||(a[4]=e=>n(i).vipPrice=e),label:"VIP\u50F9",required:"",type:"number",min:"0"},null,8,["modelValue"])]),_:1}),o(s,{cols:"12"},{default:r(()=>[o(d,{modelValue:n(i).svipPrice,"onUpdate:modelValue":a[5]||(a[5]=e=>n(i).svipPrice=e),label:"SVIP\u50F9",required:"",type:"number",min:"0"},null,8,["modelValue"])]),_:1}),o(s,{cols:"12"},{default:r(()=>[o(w,{modelValue:n(i).categoryName,"onUpdate:modelValue":a[6]||(a[6]=e=>n(i).categoryName=e),items:l.categories,label:"\u5546\u54C1\u5206\u985E",name:"select-1",require:""},null,8,["modelValue","items"])]),_:1}),o(s,{cols:"12"},{default:r(()=>[o(w,{modelValue:n(i).attribute,"onUpdate:modelValue":a[7]||(a[7]=e=>n(i).attribute=e),items:l.productType,label:"\u5546\u54C1\u904B\u9001\u985E\u578B",name:"select-2",require:""},null,8,["modelValue","items"])]),_:1}),o(s,{cols:"12",class:"gap-4"},{default:r(()=>[o(L,{modelValue:l.prodImage,"onUpdate:modelValue":a[8]||(a[8]=e=>l.prodImage=e),accept:"image/*","show-size":"",counter:"",color:"success",label:"\u4E0A\u50B3\u5546\u54C1\u7E2E\u5716","onClick:clear":l.clearImage},null,8,["modelValue","onClick:clear"]),l.imagePreviewURL?(t(),c(z,{key:0,width:"200",src:l.imagePreviewURL},null,8,["src"])):D("",!0)]),_:1}),o(s,{cols:"12",class:"gap-4"},{default:r(()=>[o(L,{modelValue:l.prodImages,"onUpdate:modelValue":a[9]||(a[9]=e=>l.prodImages=e),accept:"image/*",multiple:"","show-size":"",counter:"",color:"primary",label:"\u4E0A\u50B3\u5546\u54C1\u8F2A\u64AD\u5716","onClick:clear":l.clearImages},null,8,["modelValue","onClick:clear"]),l.imagesPreviewURL?(t(),C("div",x,[(t(!0),C(R,null,N(l.imagesPreviewURL,(e,p)=>(t(),C("div",{key:(e==null?void 0:e.id)||(e==null?void 0:e.url)||(e==null?void 0:e.img),class:"image-element"},[o(z,{width:"200",src:e.url},null,8,["src"]),o(u,{class:"icon",size:22,color:"error",icon:"tabler-circle-x",onClick:P=>l.removeFromImages(e)},null,8,["onClick"]),V(o(u,{class:"icon to-prev",size:22,color:"info",icon:"tabler-arrow-narrow-left",onClick:P=>l.swapImages(p,"prev")},null,8,["onClick"]),[[v,p!==0]]),V(o(u,{class:"icon to-next",size:22,color:"info",icon:"tabler-arrow-narrow-right",onClick:P=>l.swapImages(p,"next")},null,8,["onClick"]),[[v,p!==l.imagesPreviewURL.length-1]])]))),128)),f("div",_,[o(u,{size:100,color:"success",icon:"tabler-circle-plus"}),f("input",{id:"plus-new-image",class:"upload-image",type:"file",accept:"image/*",name:"upload-image",onChange:a[10]||(a[10]=(...e)=>l.onLastImageUpload&&l.onLastImageUpload(...e))},null,32)])])):D("",!0)]),_:1}),o(s,{cols:"12"},{default:r(()=>[f("div",h,[l.isRenaming?(t(),c(d,{key:1,modelValue:l.curEditedName,"onUpdate:modelValue":a[12]||(a[12]=e=>l.curEditedName=e),label:"\u8ACB\u8F38\u5165\u65B0\u7684\u9801\u7C64\u540D\u7A31"},null,8,["modelValue"])):(t(),c(w,{key:0,modelValue:l.curProdDetailName,"onUpdate:modelValue":a[11]||(a[11]=e=>l.curProdDetailName=e),items:l.markdownItems,label:"\u7576\u524D\u9801\u7C64",class:"prod-tabs"},null,8,["modelValue","items"])),V(f("div",null,[o(m,{icon:"",variant:"text",color:"default",size:"x-small",onClick:l.renameMarkdown},{default:r(()=>[o(u,{size:22,icon:"tabler-edit-circle"})]),_:1},8,["onClick"]),o(m,{icon:"",variant:"text",color:"default",size:"x-small",onClick:a[13]||(a[13]=e=>l.isConfirmDialogOpen=!0)},{default:r(()=>[o(u,{size:22,icon:"tabler-circle-minus"})]),_:1}),o(m,{icon:"",variant:"text",color:"default",size:"x-small",onClick:l.addMarkdownItem},{default:r(()=>[o(u,{size:22,icon:"tabler-circle-plus"})]),_:1},8,["onClick"])],512),[[v,!l.isRenaming]]),V(f("div",null,[o(m,{icon:"",variant:"text",color:"success",size:"x-small",onClick:l.confirmRenameMarkdown},{default:r(()=>[o(u,{size:22,icon:"tabler-circle-check"})]),_:1},8,["onClick"]),o(m,{icon:"",variant:"text",color:"error",size:"x-small",onClick:l.closeRenaming},{default:r(()=>[o(u,{size:22,icon:"tabler-circle-x"})]),_:1},8,["onClick"])],512),[[v,l.isRenaming]])]),(t(!0),C(R,null,N(l.markdownItems,e=>V((t(),c(k,{key:e==null?void 0:e.title,modelValue:e.text,"onUpdate:modelValue":p=>e.text=p,class:"editor","max-limit":999999},null,8,["modelValue","onUpdate:modelValue"])),[[v,l.curProdDetailName===e.title]])),128))]),_:1}),o(s,{cols:"12",class:"d-flex gap-4"},{default:r(()=>[o(m,{type:"submit",onClick:T},{default:r(()=>[q(" \u66F4\u65B0 ")]),_:1}),o(m,{color:"secondary",variant:"tonal",onClick:E},{default:r(()=>[q(" \u5FA9\u539F\u8CC7\u6599 ")]),_:1})]),_:1})]),_:1}),o(b,{isDialogVisible:l.isConfirmDialogOpen,"onUpdate:isDialogVisible":a[14]||(a[14]=e=>l.isConfirmDialogOpen=e),"confirmation-msg":"\u78BA\u5B9A\u8981\u522A\u9664\u7576\u524D\u7684\u5546\u54C1\u9801\u7C64\uFF1F\u6587\u5B57\u8CC7\u6599\u5C07\u7121\u6CD5\u5FA9\u539F",onConfirm:l.confirmDeleteMarkdown},null,8,["isDialogVisible","onConfirm"])]),_:1},512)}}},Ue=O(ee,[["__scopeId","data-v-feec0584"]]);export{Ue as default};
