import{a as c}from"./axios.364130a5.js";const i="https://api.wowo.tw",d=c.create({baseURL:i,timeout:3e4,headers:{"Content-Type":"application/json"}});d.interceptors.request.use(async t=>{const e=localStorage.getItem("at");return t!=null&&t.headers&&(t.headers["Access-Control-Allow-Origin"]="*",e&&(t.headers.Authorization=`Bearer ${e}`)),t},t=>{Promise.reject(t)});d.interceptors.response.use(t=>t,async t=>{var s;const e=localStorage.getItem("at");if(t.response&&t.response.status===401&&e){try{const n=await fetch(`${i}/api/v1/admin/user/refresh`,{method:"post",headers:new Headers({authorization:`Bearer ${localStorage.getItem("at")}`})}),{accessToken:o}=await n.json();return localStorage.setItem("at",o),(!t.config||!o)&&r(),(s=t.config)!=null&&s.headers&&(t.config.headers.Authorization=`Bearer ${o}`),c(t.config)}catch{}r()}return Promise.reject(t)});function r(){localStorage.removeItem("at"),setTimeout(()=>{location.reload()},500)}const a="api/v1",m=`${a}/admin/order/details`,p=`${a}/admin/normal-user/profile`,$=t=>`${a}/product?categoryId=${t}`,u=`${a}/product`,_=`${a}/product-category`,O=t=>`${a}/product/${t}/detail`,D=`${a}/admin/user/login`,E=`${a}/admin/product`,P=`${a}/image`,R=t=>`${a}/admin/product/${t}/inventory/add`,l=`${a}/admin/product-category`,A=t=>`${a}/admin/product/${t}`,U=t=>`${a}/admin/product-category/${t}`,C=t=>`${a}/admin/product/${t}/markdownInfos`,I=t=>`${a}/admin/product/${t}/images`,g=t=>`${a}/admin/product/${t}`,h=t=>`${a}/admin/product-category/${t}`;export{D as A,g as D,p as G,P,A as U,d as a,E as b,u as c,$ as d,_ as e,O as f,h as g,U as h,l as i,R as j,C as k,I as l,m};
