import{o as C,b as j,w as s,p as e,V as x,k as i,aM as Z,a6 as B,ay as ee,q as r,m as t,z as m,ba as V,bj as y,c as E,a as te,F as le,$ as ae,a0 as se,x as c,be as U,bf as ne,bg as oe,b7 as ie,j as re,E as ce,D as de}from"./index.765b4f7c.js";import{V as g}from"./VBtn.bed821b9.js";import{_ as ue}from"./ConfirmDialog.ac9655dc.js";import{a as q,D as me,j as fe}from"./requestURL.e234a58b.js";import{u as _e}from"./prodStore.7411be82.js";import{V as O}from"./VSpacer.52c5364c.js";import{V as R}from"./VTextField.d4c5c89c.js";import{V as b}from"./scopeId.fa70d95f.js";import{V as ve,a as pe}from"./VTable.cc1447c2.js";import{V as Ve}from"./VCol.2c960eb9.js";import{V as xe}from"./VDialog.6034821f.js";import{V as ge}from"./VMenu.a10eb0bc.js";import{V as he,a as P,b as k}from"./VList.cee23a0a.js";import"./axios.364130a5.js";import"./index.5e39d728.js";import"./forwardRefs.54bb1675.js";const ye={__name:"DialogCloseBtn",props:{icon:{type:String,required:!1,default:"tabler-x"}},setup(T){const w=T;return(f,I)=>(C(),j(g,{icon:"",class:"v-dialog-close-btn"},{default:s(()=>[e(x,{icon:w.icon},null,8,["icon"])]),_:1}))}};const be={class:"me-3"},Ce={class:"d-flex align-center flex-wrap gap-4"},we={class:"invoice-list-filter"},Ie=t("thead",{class:"text-uppercase"},[t("tr",null,[t("th",{scope:"col"}," #ID "),t("th",{scope:"col",class:"text-center"}," \u5546\u54C1\u5716 "),t("th",{scope:"col",class:"text-center"}," \u904B\u9001\u985E\u578B "),t("th",{scope:"col",class:"text-center"}," \u5546\u54C1\u540D\u7A31 "),t("th",{scope:"col",class:"text-center"}," \u5B9A\u50F9 "),t("th",{scope:"col",class:"text-center"}," \u6703\u54E1\u50F9 "),t("th",{scope:"col",class:"text-center"}," VIP\u50F9 "),t("th",{scope:"col",class:"text-center"}," SVIP\u50F9 "),t("th",{scope:"col",class:"text-center"}," \u5EAB\u5B58 "),t("th",{scope:"col",class:"text-center"}," \u64CD\u4F5C ")])],-1),De={class:"prod-id"},$e={class:"prod-img"},Pe={class:"text-center prod-name"},ke={class:"text-center prod-name"},Te={class:"text-center"},Ne={class:"text-center"},Se={class:"text-center"},Le={class:"text-center"},ze={class:"text-center"},Be={style:{width:"4rem"}},Ee=t("tr",null,[t("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),Ue=[Ee],qe={class:"text-sm text-disabled"},tt={__name:"index",setup(T){const w=_e(),f=i("");i();const I=i(10),u=i(1),D=i(1),A=i(0),_=i([]),N=i([]),h=i(!1),v=i(),F=re(),p=i(1),d=i(!1);Z(async()=>{await $()});const S=B(()=>{var n;return f.value?(n=_.value)==null?void 0:n.filter(a=>a==null?void 0:a.name.toLowerCase().includes(f.value.toLowerCase())):_.value});ee(()=>{u.value>D.value&&(u.value=D.value)});async function $(){w.fetchProducts({}).then(n=>{_.value=n.data.data}).catch(n=>{console.log(n)})}const M=B(()=>{const n=_.value.length?(u.value-1)*I.value+1:0,a=_.value.length+(u.value-1)*I.value;return`Showing ${n} to ${a} of ${A.value} entries`});function Q(n){v.value=n,h.value=!0}function H(n){F.push({path:"/apps/product/edit",query:{id:n.id}})}async function Y(n){if(n)try{console.log(v.value),await q.delete(`/${me(v.value.id)}`),$()}catch(a){console.log(a)}}function G(n){return n==="COLD_CHAIN"?"\u51B7\u93C8":"\u4E00\u822C"}function J(n){d.value=!0,v.value=n}async function K(){d.value=!1;const n=parseInt(p.value);try{await q.post(`/${fe(v.value.id)}`,{quantity:n})}catch(a){console.log(a)}await $(),p.value=1}return(n,a)=>{const W=ue,X=ye;return r(S)?(C(),j(U,{key:0,id:"product-list"},{default:s(()=>[e(y,{class:"d-flex align-center flex-wrap gap-4"},{default:s(()=>[t("div",be,[e(g,{"prepend-icon":"tabler-plus",to:{name:"apps-product-add"}},{default:s(()=>[m(" \u65B0\u5EFA\u5546\u54C1 ")]),_:1})]),e(O),t("div",Ce,[t("div",we,[e(R,{modelValue:r(f),"onUpdate:modelValue":a[0]||(a[0]=o=>V(f)?f.value=o:null),style:{width:"140px"},placeholder:"\u641C\u5C0B\u5546\u54C1",density:"compact"},null,8,["modelValue"])])])]),_:1}),e(b),e(ve,{class:"text-no-wrap invoice-list-table"},{default:s(()=>{var o;return[Ie,t("tbody",null,[(C(!0),E(le,null,te(r(S),l=>{var L;return C(),E("tr",{key:l.id,style:{height:"3.75rem"}},[t("td",De,[t("span",null,"#"+c(l==null?void 0:l.id),1)]),t("td",$e,[e(ce,null,{default:s(()=>[e(de,{src:l==null?void 0:l.coverImg},null,8,["src"])]),_:2},1024)]),t("td",Pe,c(G(l==null?void 0:l.attribute)),1),t("td",ke,c(l.name),1),t("td",Te," $"+c(l==null?void 0:l.price),1),t("td",Ne," $"+c(l==null?void 0:l.memberPrice),1),t("td",Se," $"+c(l==null?void 0:l.vipPrice),1),t("td",Le," $"+c(l==null?void 0:l.svipPrice),1),t("td",ze,c(((L=l==null?void 0:l.inventory)==null?void 0:L.quantity)||0),1),t("td",Be,[e(g,{icon:"",variant:"text",color:"primary",size:"x-small"},{default:s(()=>[e(x,{size:22,icon:"tabler-dots-vertical"}),e(ge,{activator:"parent"},{default:s(()=>[e(he,null,{default:s(()=>[e(P,{value:"edit",onClick:z=>H(l)},{prepend:s(()=>[e(x,{color:"success",size:"24",class:"me-3",icon:"tabler-pencil"})]),default:s(()=>[e(k,null,{default:s(()=>[m("\u7DE8\u8F2F")]),_:1})]),_:2},1032,["onClick"]),e(P,{value:"delete",onClick:z=>Q(l)},{prepend:s(()=>[e(x,{color:"error",size:"24",class:"me-3",icon:"tabler-trash"})]),default:s(()=>[e(k,null,{default:s(()=>[m("\u522A\u9664")]),_:1})]),_:2},1032,["onClick"]),e(P,{value:"delete",onClick:z=>J(l)},{prepend:s(()=>[e(x,{color:"info",size:"24",class:"me-3",icon:"tabler-plus"})]),default:s(()=>[e(k,null,{default:s(()=>[m("\u65B0\u589E\u5EAB\u5B58")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])])}),128))]),ae(t("tfoot",null,Ue,512),[[se,!((o=r(_))!=null&&o.length)]])]}),_:1}),e(b),e(y,{class:"d-flex align-center flex-wrap gap-4 py-3"},{default:s(()=>[t("span",qe,c(r(M)),1),e(O),e(pe,{modelValue:r(u),"onUpdate:modelValue":a[1]||(a[1]=o=>V(u)?u.value=o:null),size:"small","total-visible":5,length:r(D),onNext:a[2]||(a[2]=o=>N.value=[]),onPrev:a[3]||(a[3]=o=>N.value=[])},null,8,["modelValue","length"])]),_:1}),e(W,{isDialogVisible:r(h),"onUpdate:isDialogVisible":a[4]||(a[4]=o=>V(h)?h.value=o:null),"confirmation-msg":"\u78BA\u5B9A\u8981\u522A\u9664\u9078\u64C7\u7684\u5546\u54C1\uFF1F",onConfirm:Y},null,8,["isDialogVisible"]),e(xe,{modelValue:r(d),"onUpdate:modelValue":a[8]||(a[8]=o=>V(d)?d.value=o:null),scrollable:"","max-width":"320"},{default:s(()=>[e(X,{onClick:a[5]||(a[5]=o=>d.value=!r(d))}),e(U,null,{default:s(()=>[e(ne,{class:"pb-5"},{default:s(()=>[e(oe,null,{default:s(()=>[m("\u65B0\u589E\u5EAB\u5B58\u6578\u91CF")]),_:1})]),_:1}),e(b),e(y,{style:{height:"200px"}},{default:s(()=>[e(Ve,null,{default:s(()=>[e(R,{modelValue:r(p),"onUpdate:modelValue":a[6]||(a[6]=o=>V(p)?p.value=o:null),label:"\u6578\u91CF",required:"",min:"1",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(b),e(y,{class:"d-flex justify-end flex-wrap gap-3 pt-5"},{default:s(()=>[e(g,{color:"secondary",variant:"tonal",onClick:a[7]||(a[7]=o=>d.value=!1)},{default:s(()=>[m(" \u53D6\u6D88 ")]),_:1}),e(g,{onClick:K},{default:s(()=>[m(" \u78BA\u5B9A ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):ie("",!0)}}};export{tt as default};
