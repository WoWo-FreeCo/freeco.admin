import{k as n,ay as A,a6 as N,aH as H,q as r,o as v,b as O,w as a,p as e,m as s,z as c,bj as _,c as h,a as G,F as J,$ as K,a0 as W,x as C,ba as b,be as E,bf as X,bg as Y,b7 as Z,j as ee,D as te,V as w}from"./index.814ba5dc.js";import{_ as ae}from"./DialogCloseBtn.7e778c05.js";import{_ as le}from"./ConfirmDialog.65048213.js";import{a as se,t as oe}from"./requestURL.4ab77af1.js";import{u as ne}from"./bannerStore.b17b5f32.js";import{V}from"./VBtn.15cc7225.js";import{V as L}from"./VSpacer.32b7e6c3.js";import{V as g}from"./VDivider.4f08e55f.js";import{V as ie}from"./VTable.e85ebe62.js";import{V as re}from"./VPagination.dd4f66aa.js";import{V as ue}from"./VCol.64655a44.js";import{V as de}from"./VTextField.4b3881bb.js";import{V as ce}from"./VDialog.cba77d8d.js";import{V as me}from"./VMenu.f86191f5.js";import{V as fe,a as T,b as z}from"./VList.3902500a.js";import"./axios.364130a5.js";import"./index.c82ae7fd.js";import"./forwardRefs.54bb1675.js";import"./scopeId.490f9154.js";const pe={class:"me-3"},ve=s("div",{class:"d-flex align-center flex-wrap gap-4"},null,-1),_e=s("thead",{class:"text-uppercase"},[s("tr",null,[s("th",{scope:"col",class:"text-center"}," \u6A6B\u5E45\u7E2E\u5716 "),s("th",{scope:"col",class:"text-center"}," \u6A6B\u5E45\u5716\u7247\u7DB2\u5740 "),s("th",{scope:"col",class:"text-center"}," \u5B50\u9801\u9762 "),s("th",{scope:"col",class:"text-center"}," \u64CD\u4F5C ")])],-1),Ve={class:"text-center"},ge={class:"text-center"},xe={class:"text-center"},ye={key:0,style:{width:"4rem"}},he=s("tr",null,[s("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),Ce=[he],be={class:"text-sm text-disabled"},Ae={__name:"index",setup(we){const P=ne(),k=n(""),D=n(10),u=n(1),x=n(1),S=n(0),d=n([]),I=n([]),f=n(!1),y=n(),m=n(!1);n(0);const R=ee();A(async()=>{await B()});const $=N(()=>{var l;return k.value?(l=d.value)==null?void 0:l.filter(t=>{var p;return(p=t==null?void 0:t.nickname)==null?void 0:p.toLowerCase().includes(k.value.toLowerCase())}):d.value});H(()=>{u.value>x.value&&(u.value=x.value)});async function B(){P.fetchBanners({}).then(l=>{d.value=l.data.data}).catch(l=>{console.log(l)})}const U=N(()=>{const l=d.value.length?(u.value-1)*D.value+1:0,t=d.value.length+(u.value-1)*D.value;return`Showing ${l} to ${t} of ${S.value} entries`});function j(l){y.value=l,f.value=!0}function q(l){R.push({path:"/apps/banner/edit",query:{id:l.id}})}async function F(l){if(l)try{console.log(y.value),await se.delete(`/${oe(y.value.id)}`),B()}catch(t){console.log(t)}}return(l,t)=>{const p=le,M=ae;return r($)?(v(),O(E,{key:0,id:"banner-list"},{default:a(()=>[e(_,{class:"d-flex align-center flex-wrap gap-4"},{default:a(()=>[s("div",pe,[e(V,{"prepend-icon":"tabler-plus",to:{name:"apps-banner-add"}},{default:a(()=>[c(" \u65B0\u5EFA\u6A6B\u5E45 ")]),_:1})]),e(L),ve]),_:1}),e(g),e(ie,{class:"text-no-wrap invoice-list-table"},{default:a(()=>{var o;return[_e,s("tbody",null,[(v(!0),h(J,null,G(r($),i=>(v(),h("tr",{key:i.id,style:{height:"3.75rem"}},[s("td",Ve,[e(te,{src:i.img},null,8,["src"])]),s("td",ge,C(i==null?void 0:i.img),1),s("td",xe,C(i==null?void 0:i.href),1),(v(),h("td",ye,[e(V,{icon:"",variant:"text",color:"primary",size:"x-small"},{default:a(()=>[e(w,{size:22,icon:"tabler-dots-vertical"}),e(me,{activator:"parent"},{default:a(()=>[e(fe,null,{default:a(()=>[e(T,{value:"edit",onClick:Q=>q(i)},{prepend:a(()=>[e(w,{color:"success",size:"24",class:"me-3",icon:"tabler-pencil"})]),default:a(()=>[e(z,null,{default:a(()=>[c("\u7DE8\u8F2F")]),_:1})]),_:2},1032,["onClick"]),e(T,{value:"delete",onClick:Q=>j(i)},{prepend:a(()=>[e(w,{color:"error",size:"24",class:"me-3",icon:"tabler-trash"})]),default:a(()=>[e(z,null,{default:a(()=>[c("\u522A\u9664")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))]))),128))]),K(s("tfoot",null,Ce,512),[[W,!((o=r(d))!=null&&o.length)]])]}),_:1}),e(g),e(_,{class:"d-flex align-center flex-wrap gap-4 py-3"},{default:a(()=>[s("span",be,C(r(U)),1),e(L),e(re,{modelValue:r(u),"onUpdate:modelValue":t[0]||(t[0]=o=>b(u)?u.value=o:null),size:"small","total-visible":5,length:r(x),onNext:t[1]||(t[1]=o=>I.value=[]),onPrev:t[2]||(t[2]=o=>I.value=[])},null,8,["modelValue","length"])]),_:1}),e(p,{isDialogVisible:r(f),"onUpdate:isDialogVisible":t[3]||(t[3]=o=>b(f)?f.value=o:null),"confirmation-msg":"\u78BA\u5B9A\u8981\u522A\u9664\u9078\u64C7\u7684\u6A6B\u5E45\uFF1F",onConfirm:F},null,8,["isDialogVisible"]),e(ce,{modelValue:r(m),"onUpdate:modelValue":t[7]||(t[7]=o=>b(m)?m.value=o:null),scrollable:"","max-width":"320"},{default:a(()=>[e(M,{onClick:t[4]||(t[4]=o=>m.value=!r(m))}),e(E,null,{default:a(()=>[e(X,{class:"pb-5"},{default:a(()=>[e(Y,null,{default:a(()=>[c("\u4FEE\u6539\u6703\u54E1\u7D05\u5229\u9EDE\u6578")]),_:1})]),_:1}),e(g),e(_,{style:{height:"200px"}},{default:a(()=>[e(ue,null,{default:a(()=>[e(de,{modelValue:l.addInventoryQuantity,"onUpdate:modelValue":t[5]||(t[5]=o=>l.addInventoryQuantity=o),label:"\u6578\u91CF",required:"",min:"1",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(g),e(_,{class:"d-flex justify-end flex-wrap gap-3 pt-5"},{default:a(()=>[e(V,{color:"secondary",variant:"tonal",onClick:t[6]||(t[6]=o=>l.isInvDialogVisible=!1)},{default:a(()=>[c(" \u53D6\u6D88 ")]),_:1}),e(V,{onClick:l.confirmAddInventory},{default:a(()=>[c(" \u78BA\u5B9A ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):Z("",!0)}}};export{Ae as default};
